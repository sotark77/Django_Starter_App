{% load static %}
{% for message in messages %}
  {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
  <div 
    x-data="{ show: true, progress: 100 }" 
    x-init="
      setTimeout(() => show = false, 5000);
      let interval = setInterval(() => {
        progress -= 2;
        if (progress <= 0) clearInterval(interval);
      }, 100);
    " 
    x-show="show" 
    x-transition:enter="transition ease-out duration-300" 
    x-transition:enter-start="opacity-0 translate-y-4" 
    x-transition:enter-end="opacity-100 translate-y-0" 
    x-transition:leave="transition ease-in duration-300" 
    x-transition:leave-start="opacity-100 translate-y-0" 
    x-transition:leave-end="opacity-0 translate-y-4"
    class="max-w-xs fixed bottom-10 end-10 bg-white/30 backdrop-blur-lg border border-teal-500 text-gray-700 rounded-xl shadow-lg z-50 overflow-hidden"
    role="alert" 
    tabindex="-1" 
    aria-live="polite" 
    aria-atomic="true"
  >
    <div class="flex items-center gap-3 p-3">
      <div class="text-teal-500">
        <i class="ri-checkbox-circle-line w-5 h-5"></i>  <!-- Remix Icon -->
      </div>
      <div class="flex-1 text-sm">{{ message }}</div>
      <button @click="show = false" class="text-gray-400 hover:text-gray-600">
        <i class="ri-close-line text-lg"></i>
      </button>
    </div>
    <!-- Progress Bar -->
    <div class="h-1 bg-teal-200">
      <div class="h-full bg-teal-500 transition-all duration-100" :style="`width: ${progress}%`"></div>
    </div>
  </div>
  {% endif %}

  {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
  <div 
    x-data="{ show: true, progress: 100 }" 
    x-init="
      setTimeout(() => show = false, 5000);
      let interval = setInterval(() => {
        progress -= 2;
        if (progress <= 0) clearInterval(interval);
      }, 100);
    " 
    x-show="show" 
    x-transition:enter="transition ease-out duration-300" 
    x-transition:enter-start="opacity-0 translate-y-4" 
    x-transition:enter-end="opacity-100 translate-y-0" 
    x-transition:leave="transition ease-in duration-300" 
    x-transition:leave-start="opacity-100 translate-y-0" 
    x-transition:leave-end="opacity-0 translate-y-4"
    class="max-w-xs fixed bottom-10 end-10 bg-white/30 backdrop-blur-lg  border border-red-400 text-gray-700 rounded-xl shadow-lg z-50 overflow-hidden"
    role="alert" 
    tabindex="-1" 
    aria-live="assertive" 
    aria-atomic="true"
  >
    <div class="flex items-center gap-3 p-3">
      <div class="text-red-400">
        <i class="ri-error-warning-line w-5 h-5"></i>  <!-- Remix Icon -->
      </div>
      <div class="flex-1 text-sm">{{ message }}</div>
      <button @click="show = false" class="text-gray-400 hover:text-gray-600">
        <i class="ri-close-line text-lg"></i>
      </button>
    </div>
    <!-- Progress Bar -->
    <div class="h-1 bg-red-200">
      <div class="h-full bg-red-400 transition-all duration-100" :style="`width: ${progress}%`"></div>
    </div>
  </div>
  {% endif %}

  {% if message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
  <div 
    x-data="{ show: true, progress: 100 }" 
    x-init="
      setTimeout(() => show = false, 5000);
      let interval = setInterval(() => {
        progress -= 2;
        if (progress <= 0) clearInterval(interval);
      }, 100);
    " 
    x-show="show" 
    x-transition:enter="transition ease-out duration-300" 
    x-transition:enter-start="opacity-0 translate-y-4" 
    x-transition:enter-end="opacity-100 translate-y-0" 
    x-transition:leave="transition ease-in duration-300" 
    x-transition:leave-start="opacity-100 translate-y-0" 
    x-transition:leave-end="opacity-0 translate-y-4"
    class="max-w-xs fixed bottom-10 end-10 bg-white/30 backdrop-blur-lg border border-yellow-300 text-gray-700 rounded-xl shadow-lg z-50 overflow-hidden"
    role="alert" 
    tabindex="-1" 
    aria-live="polite" 
    aria-atomic="true"
  >
    <div class="flex items-center gap-3 p-3">
      <div class="text-yellow-500">
        <i class="ri-information-line w-4 h-4"></i>  <!-- Remix Icon -->
      </div>
      <div class="flex-1 text-sm">{{ message }}</div>
      <button @click="show = false" class="text-gray-400 hover:text-gray-600">
        <i class="ri-close-line text-lg"></i>
      </button>
    </div>
    <!-- Progress Bar -->
    <div class="h-1 bg-yellow-200">
      <div class="h-full bg-yellow-400 transition-all duration-100" :style="`width: ${progress}%`"></div>
    </div>
  </div>
  {% endif %}
{% endfor %}
